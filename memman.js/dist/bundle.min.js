var version=function(e){"use strict";let t=null,n=new Map;function o(e){return new Proxy({},{get:(t,n)=>"valueOf"===n||"toString"===n?e:Reflect.get(t,n),apply:(t,n,o)=>e.apply(n,o)})}function r(e){return function(...n){const o=t;t={};const r=e(...n);return t=o,r}}function c(){n.forEach(((e,t)=>{e.forEach((e=>{e.cleanup&&e.cleanup(),e.cleanup=e.fn()}))}))}const i={components:{},lastId:0};function a(e){const t=e.render(),n=`<script>window.__MEMMAN_STATE__=${JSON.stringify(i)}<\/script>`;return t.innerHTML=n+t.innerHTML,t.outerHTML}function s(e){try{i.components=e.components,i.lastId=e.lastId}catch(e){console.error("Error al actualizar el estado: ",e)}Object.entries(i.components).forEach((([e,t])=>{const n=document.querySelector(`[data-memman-id="${e}"]`);n&&n.replaceWith(t)}))}return e.createApp=function(e,t={}){const n=function(e){return{get:function(t){return e[t]}}}(t);let o=null;return{mount:function(t){const c=document.querySelector(t);c.innerHTML="";const i=r(e)(n);i instanceof Node?(c.appendChild(i),o=i):console.error("Error: el componente no es un objeto Node válido")},triggerRerender:function(){o?c():console.error("Error: la aplicación no ha sido montada todavía")}}},e.createComponent=function(e){class t{constructor(e){this.props=e,this.element=null,this.id=null}render(){return this.element||(this.element=e(this.props),this.id=i.lastId++,this.element.setAttribute("data-memman-id",this.id),i.components[this.id]=this.element),this.element}}return t.isMemmanComponent=!0,t},e.createElement=function(e,t={},...n){const o=document.createElement(e);if(t&&"object"==typeof t)for(const[e,n]of Object.entries(t))"className"===e?o.classList.add(n):e.startsWith("on")?o.addEventListener(e.slice(2).toLowerCase(),n):"style"===e&&"object"==typeof n?Object.assign(o.style,n):o.setAttribute(e,n);for(const e of n.flat())if("string"==typeof e)o.appendChild(document.createTextNode(e));else if(e instanceof HTMLElement)o.appendChild(e);else if(e&&"object"==typeof e&&"text"===e.type)e.hasOwnProperty("content")&&o.appendChild(document.createTextNode(e.content));else if("function"==typeof e){const t=e();o.appendChild(document.createTextNode(String(t)))}else o.appendChild(document.createTextNode(String(e)));const r=i.lastId++;return o.setAttribute("data-memman-id",r),i.components[r]=o,o},e.default=function(){console.log("version "+version)},e.memmanCreateSignal=function(e){if(null==e)throw new Error("Initial value cannot be null or undefined.");let t=e,n=new Set;return[o((function(){return t})),function(e){"function"==typeof e&&(e=e(t)),t!==e&&(t=e,n.forEach((e=>e())),c())}]},e.memmanUseEffect=function(e,o){const r=t;if(!r)throw new Error("No hay un componente actual establecido.");const c={fn:e,deps:o,cleanup:null},i=n.get(r)||new Set,a=Array.from(i).find((t=>t.fn===e));if(!a)return i.add(c),void n.set(r,i);if(!o)return c.cleanup=a.cleanup,i.add(c),void n.set(r,i);!a.deps||o.some(((e,t)=>!Object.is(e,a.deps[t])))?(a.cleanup&&a.cleanup(),i.delete(a),i.add(c),n.set(r,i)):(i.add(a),n.set(r,i))},e.renderMemmanComponent=function(e,t){return a(new e(t))},e.triggerRerender=c,e.updateState=s,e.useDynamicState=function(e){const t={value:e,setValue(e){t.value=e,s(t)}};return[t.value,t.setValue]},e.withCurrentComponent=r,e.withErrorBoundary=function(e,t){try{return e(t)}catch(e){return console.error("Error in component:",e),null}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
