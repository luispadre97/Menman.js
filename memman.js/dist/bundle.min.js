var version=function(e){"use strict";let t=null,n=new Map;function r(e){return new Proxy({},{get:(t,n)=>"valueOf"===n||"toString"===n?e:Reflect.get(t,n),apply:(t,n,r)=>e.apply(n,r)})}function o(e){return function(...n){const r=t;t={};const o=e(...n);return t=r,o}}function s(){n.forEach(((e,t)=>{e.forEach((e=>{e.cleanup&&e.cleanup(),e.cleanup=e.fn()}))}))}const i={components:{},lastId:0};function c(e){const t=e.render(),n=`<script>window.__MEMMAN_STATE__=${JSON.stringify(i)}<\/script>`;return t.innerHTML=n+t.innerHTML,t.outerHTML}function u(e){try{i.components=e.components,i.lastId=e.lastId}catch(e){console.error("Error al actualizar el estado: ",e)}Object.entries(i.components).forEach((([e,t])=>{const n=document.querySelector(`[data-memman-id="${e}"]`);n&&n.replaceWith(t)}))}class a{constructor(){this.events={}}on(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}off(e,t){e in this.events&&(this.events[e]=this.events[e].filter((e=>e!==t)))}emit(e,...t){e in this.events&&this.events[e].forEach((e=>e(...t)))}hasEmit(e){return e in this.events&&this.events[e].length>0}}return e.createApp=function(e,t={}){const n=function(e){return{get:function(t){return e[t]}}}(t);let r=null;return{mount:function(t){const s=document.querySelector(t);s.innerHTML="";const i=o(e)(n);i instanceof Node?(s.appendChild(i),r=i):console.error("Error: el componente no es un objeto Node válido")},triggerRerender:function(){r?s():console.error("Error: la aplicación no ha sido montada todavía")}}},e.createComponent=function(e){class t{constructor(e){this.props=e,this.element=null,this.id=null}render(){return this.element||(this.element=e(this.props),this.id=i.lastId++,this.element.setAttribute("data-memman-id",this.id),i.components[this.id]=this.element),this.element}}return t.isMemmanComponent=!0,t},e.createElement=function(e,t={},...n){const r=document.createElement(e);if(t&&"object"==typeof t)for(const[e,n]of Object.entries(t))"className"===e?r.classList.add(n):e.startsWith("on")?r.addEventListener(e.slice(2).toLowerCase(),n):"style"===e&&"object"==typeof n?Object.assign(r.style,n):r.setAttribute(e,n);for(const e of n.flat())if("string"==typeof e)r.appendChild(document.createTextNode(e));else if(e instanceof HTMLElement)r.appendChild(e);else if(e&&"object"==typeof e&&"text"===e.type)e.hasOwnProperty("content")&&r.appendChild(document.createTextNode(e.content));else if("function"==typeof e){const t=e();r.appendChild(document.createTextNode(String(t)))}else r.appendChild(document.createTextNode(String(e)));const o=i.lastId++;return r.setAttribute("data-memman-id",o),i.components[o]=r,r},e.createMemmaLive=function(){const e=new a,t=new Map;let n=null;const r={get:(e,r,o)=>(n&&(t.has(r)||t.set(r,new Set),t.get(r).add(n)),Reflect.get(e,r,o)),set(n,r,o,s){const i=Reflect.set(n,r,o,s);if(t.has(r)){t.get(r).forEach((e=>e()))}return e.emit(r,o),i}};class o{constructor(e){this.value=new Proxy(e,r),this.subscribers=new Map}set(e){Object.keys(e).forEach((t=>{this.value[t]=e[t]}))}get(){return this.value}subscribe(t,n){const r=Math.random().toString(36).substr(2,9);return this.subscribers.set(r,n),e.on(t,n),r}unsubscribe(t){const n=this.subscribers.get(t);void 0!==n&&(e.off(event,n),this.subscribers.delete(t))}}return{useLiveState:function(e){const t=new o(e);function r(e,n,r){s((()=>{t.subscribe(e,(()=>{!function(e,t,n){if(!(t in e))throw new Error(`Property "${t}" does not exist in object`);let r=e[t],o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{get:()=>r,set(t){r=t,e.renderedValue=r,n(r)}})}(t.value,n,r)}))}))}function s(e){return n=e,e(),n=null,Math.random().toString(36).substr(2,9)}return[t.value,function(e){t.set(e)},s,function(e,n,o){return s((()=>{t.subscribe(e,(()=>{r(e,n,o)}))}))},function(e){void 0!==t.subscribers.get(e)&&t.unsubscribe(e)}]},useLiveEffect:function(t,n){return n.forEach((n=>{e.on(n,t)})),{emitEvent:(t,...n)=>{e.emit(t,...n)},unsubscribe:()=>{n.forEach((n=>{e.off(n,t)}))}}}}},e.default=function(){console.log("version "+version)},e.memmanCreateSignal=function(e){if(null==e)throw new Error("Initial value cannot be null or undefined.");let t=e,n=new Set;return[r((function(){return t})),function(e){"function"==typeof e&&(e=e(t)),t!==e&&(t=e,n.forEach((e=>e())),s())}]},e.memmanUseEffect=function(e,r){const o=t;if(!o)throw new Error("No hay un componente actual establecido.");const s={fn:e,deps:r,cleanup:null},i=n.get(o)||new Set,c=Array.from(i).find((t=>t.fn===e));if(!c)return i.add(s),void n.set(o,i);if(!r)return s.cleanup=c.cleanup,i.add(s),void n.set(o,i);!c.deps||r.some(((e,t)=>!Object.is(e,c.deps[t])))?(c.cleanup&&c.cleanup(),i.delete(c),i.add(s),n.set(o,i)):(i.add(c),n.set(o,i))},e.renderMemmanComponent=function(e,t){return c(new e(t))},e.triggerRerender=s,e.updateState=u,e.useDynamicState=function(e){const t={value:e,setValue(e){t.value=e,u(t)}};return[t.value,t.setValue]},e.withCurrentComponent=o,e.withErrorBoundary=function(e,t){try{return e(t)}catch(e){return console.error("Error in component:",e),null}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
